<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>DIF 2017 Yearly Wheel</title>
  <style>
    body { font-family: sans-serif; }
    #timeline { width: 600px; height: 600px; margin: auto; }
  </style>
</head>
<body>

<div id="timeline"></div>

<script type="module">
  import CircularTimeline from 'https://unpkg.com/circalify@latest/src/index.js';
  import Papa from 'https://cdn.jsdelivr.net/npm/papaparse@5.4.1/+esm';

  async function loadCSV(url) {
    const response = await fetch(url);
    const text = await response.text();
    return Papa.parse(text, { header: true }).data;
  }

  const rawEvents = await loadCSV(
    'https://docs.google.com/spreadsheets/d/1ad2DsSE9ZqvgaHzglGBkivileGTSi12WTm-cRzlBE0c/export?format=csv'
  );

  const events = rawEvents
    .filter(e => e.ring)
    .map(e => ({
      ...e,
      startDate: new Date(e.startDate),
      endDate: new Date(e.endDate)
    }));

  const timeline = new CircularTimeline('#timeline', {
    startYear: 2026,
    startMonth: 0,
    numberOfMonths: 12,
    rings: [
      { type: 'calendar' },
      { type: 'data', name: 'Annet', color: '#cda2de' },
      { type: 'data', name: 'Kamper', color: '#0078D4' },
      { type: 'data', name: 'Cuper', color: '#edbd4c' }
    ]
  });

  timeline.setData(events.filter(e => e.ring === 'Cuper'), 'Cuper');
  timeline.setData(events.filter(e => e.ring === 'Kamper'), 'Kamper');
  timeline.setData(events.filter(e => e.ring === 'Annet'), 'Annet');
</script>


</body>
</html>
